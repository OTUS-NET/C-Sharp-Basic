### Цель
    
Расширение функционала приложения, разработанного в предыдущих домашних заданиях:

- Работа с файлами
- Работа с json

---

### Описание

Перед выполнением нужно ознакомится с [Правила отправки домашнего задания на проверку](https://github.com/OTUS-NET/C-Sharp-Basic/blob/main/Homeworks/README.md)

1. Перенос хранения `ToDoItem` данных в файлы
    - Создать класс `FileToDoRepository`, который реализует интерфейс `IToDoRepository`
    - Реализовать хранение `ToDoItem` в отдельных json файлах.
        - Имя файла: `"{ToDoItem.Id}.json"`
    - Имя базовой папки нужно получать через конструктор. Папку нужно создавать если её нет.
    - Для хранения данных в файлах использовать json формат. Для этого нужно использовать библиотеку `System.Text.Json` и методы `JsonSerializer.Serialize` `JsonSerializer.Deserialize`. Можно использовать асинхронные варианты. [Документация](https://learn.microsoft.com/ru-ru/dotnet/standard/serialization/)
    - Заменить использование `InMemoryToDoRepository` на `FileToDoRepository` в проекте
2. Перенос хранения `ToDoUser` данных в файлы
    - Создать класс `FileUserRepository`, который реализует интерфейс `IUserRepository`
    - Реализовать хранение `ToDoUser` в отдельных json файлах.
        - Имя файла: `"{ToDoUser.UserId}.json"`
    - Имя базовой папки нужно получать через конструктор. Папку нужно создавать если её нет.
    - Для хранения данных в файлах использовать JSON формат. Для этого нужно использовать библиотеку `System.Text.Json`.
    - Заменить использование `InMemoryUserRepository` на `FileUserRepository` в проекте
3. Оптимизация поиска `ToDoItem` по `UserId`
    - Реализовать в `FileToDoRepository` хранение `ToDoItem` в отдельных json файлах, сгуппированных по `UserId` в папках
    - Имя папки: `"{ToDoItem.User.UserId}"`
    - Имя файла: `"{ToDoItem.Id}.json"`
4. Индекс для оптимизации удаления `ToDoItem`
    - Добавить в `FileToDoRepository` файл индекс в json формате, в котором хранятся связки `ToDoItemId` и `UserId`
    - Наполнять индекс в методе `FileToDoRepository.Add`
    - Использовать и обновлять индекс в методе `FileToDoRepository.Delete`
    - Если файла индекса нет, то создать файл и наполнить его актуальными данными через сканирование всех папок

**Ознакомительное примечание (выполнять не нужно):**
Для безопасной работы с файлами в многопоточной среде рекомендуется использовать синхронизацию потоков, чтобы в один момент времени с файлом работал только один поток. Это поможет избежать race conditions, повреждение данных, IO исключений и тд. Для этого хорошо подходит [SemaphoreSlim](https://learn.microsoft.com/ru-ru/dotnet/api/system.threading.semaphoreslim), так как он поддерживает асинхронность, оптимизирован для внутрипроцессной синхронизации и не использует объекты ядра ОС. Например, в нашем случае можно было использовать отдельные `SemaphoreSlim` для каждого `UserId`. Данная тема выходит за рамки курса.

---

### Критерии оценивания

- Пункт 1 - 3 балла
- Пункт 2 - 3 балла
- Пункт 3 - 2 балла
- Пункт 4 - 2 балла

Для зачёта домашнего задания достаточно 6 баллов.